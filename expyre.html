
<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>expyre package &#8212; ExPyRe  documentation</title>
    
  <!-- Loaded before other Sphinx assets -->
  <link href="_static/styles/theme.css?digest=1999514e3f237ded88cf" rel="stylesheet">
<link href="_static/styles/pydata-sphinx-theme.css?digest=1999514e3f237ded88cf" rel="stylesheet">

    
  <link rel="stylesheet"
    href="_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
    <link rel="stylesheet" href="_static/styles/sphinx-book-theme.css?digest=62ba249389abaaa9ffc34bf36a076bdc1d65ee18" type="text/css" />
    
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="_static/scripts/pydata-sphinx-theme.js?digest=1999514e3f237ded88cf">

    <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/scripts/sphinx-book-theme.js?digest=f31d14ad54b65d19161ba51d4ffff3a77ae00456"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="expyre.cli package" href="expyre.cli.html" />
    <link rel="prev" title="Unit testing" href="unit_testing.html" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="en">
    

    <!-- Google Analytics -->
    
  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="60">
<!-- Checkboxes to toggle the left sidebar -->
<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation" aria-label="Toggle navigation sidebar">
<label class="overlay overlay-navbar" for="__navigation">
    <div class="visually-hidden">Toggle navigation sidebar</div>
</label>
<!-- Checkboxes to toggle the in-page toc -->
<input type="checkbox" class="sidebar-toggle" name="__page-toc" id="__page-toc" aria-label="Toggle in-page Table of Contents">
<label class="overlay overlay-pagetoc" for="__page-toc">
    <div class="visually-hidden">Toggle in-page Table of Contents</div>
</label>
<!-- Headers at the top -->
<div class="announcement header-item noprint"></div>
<div class="header header-item noprint"></div>

    
    <div class="container-fluid" id="banner"></div>

    

    <div class="container-xl">
      <div class="row">
          
<!-- Sidebar -->
<div class="bd-sidebar noprint" id="site-navigation">
    <div class="bd-sidebar__content">
        <div class="bd-sidebar__top"><div class="navbar-brand-box">
    <a class="navbar-brand text-wrap" href="index.html">
      
      
      
      <h1 class="site-logo" id="site-title">ExPyRe  documentation</h1>
      
    </a>
</div><form class="bd-search d-flex align-items-center" action="search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search the docs ..." aria-label="Search the docs ..." autocomplete="off" >
</form><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item active">
        <p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Contents:
 </span>
</p>
<ul class="current nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="basic_use.html">
   Basic use
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="resources.html">
   Resources
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="config.html">
   Scheduler Configuration file
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="restarting.html">
   Restarting an interrupted process
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="environment_variables.html">
   Environment Variables
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="command_line.html">
   Command line utilities
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="unit_testing.html">
   Unit testing
  </a>
 </li>
 <li class="toctree-l1 current active has-children">
  <a class="current reference internal" href="#">
   expyre package
  </a>
  <input checked="" class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" type="checkbox"/>
  <label for="toctree-checkbox-1">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="expyre.cli.html">
     expyre.cli package
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="expyre.schedulers.html">
     expyre.schedulers package
    </a>
   </li>
  </ul>
 </li>
</ul>

    </div>
</nav></div>
        <div class="bd-sidebar__bottom">
             <!-- To handle the deprecated key -->
            
            <div class="navbar_extra_footer">
            Theme by the <a href="https://ebp.jupyterbook.org">Executable Book Project</a>
            </div>
            
        </div>
    </div>
    <div id="rtd-footer-container"></div>
</div>


          


          
<!-- A tiny helper pixel to detect if we've scrolled -->
<div class="sbt-scroll-pixel-helper"></div>
<!-- Main content -->
<div class="col py-0 content-container">
    
    <div class="header-article row sticky-top noprint">
        



<div class="col py-1 d-flex header-article-main">
    <div class="header-article__left">
        
        <label for="__navigation"
  class="headerbtn"
  data-toggle="tooltip"
data-placement="right"
title="Toggle navigation"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-bars"></i>
  </span>

</label>

        
    </div>
    <div class="header-article__right">
<button onclick="toggleFullScreen()"
  class="headerbtn"
  data-toggle="tooltip"
data-placement="bottom"
title="Fullscreen mode"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>

<div class="menu-dropdown menu-dropdown-download-buttons">
  <button class="headerbtn menu-dropdown__trigger"
      aria-label="Download this page">
      <i class="fas fa-download"></i>
  </button>
  <div class="menu-dropdown__content">
    <ul>
      <li>
        <a href="_sources/expyre.rst.txt"
   class="headerbtn"
   data-toggle="tooltip"
data-placement="left"
title="Download source file"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="headerbtn__text-container">.rst</span>
</a>

      </li>
      
      <li>
        
<button onclick="printPdf(this)"
  class="headerbtn"
  data-toggle="tooltip"
data-placement="left"
title="Print to PDF"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="headerbtn__text-container">.pdf</span>
</button>

      </li>
      
    </ul>
  </div>
</div>
<label for="__page-toc"
  class="headerbtn headerbtn-page-toc"
  
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-list"></i>
  </span>

</label>

    </div>
</div>

<!-- Table of contents -->
<div class="col-md-3 bd-toc show noprint">
    <div class="tocsection onthispage pt-5 pb-3">
        <i class="fas fa-list"></i> Contents
    </div>
    <nav id="bd-toc-nav" aria-label="Page">
        <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#subpackages">
   Subpackages
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#submodules">
   Submodules
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#module-expyre.config">
   expyre.config module
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#global-variables">
     Global variables
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#module-expyre.func">
   expyre.func module
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#module-expyre.jobsdb">
   expyre.jobsdb module
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#module-expyre.resources">
   expyre.resources module
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#module-expyre.subprocess">
   expyre.subprocess module
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#module-expyre.system">
   expyre.system module
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#module-expyre.units">
   expyre.units module
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#module-expyre.util">
   expyre.util module
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#module-expyre">
   Module contents
  </a>
 </li>
</ul>

    </nav>
</div>
    </div>
    <div class="article row">
        <div class="col pl-md-3 pl-lg-5 content-container">
            <!-- Table of contents that is only displayed when printing the page -->
            <div id="jb-print-docs-body" class="onlyprint">
                <h1>expyre package</h1>
                <!-- Table of contents -->
                <div id="print-main-content">
                    <div id="jb-print-toc">
                        
                        <div>
                            <h2> Contents </h2>
                        </div>
                        <nav aria-label="Page">
                            <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#subpackages">
   Subpackages
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#submodules">
   Submodules
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#module-expyre.config">
   expyre.config module
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#global-variables">
     Global variables
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#module-expyre.func">
   expyre.func module
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#module-expyre.jobsdb">
   expyre.jobsdb module
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#module-expyre.resources">
   expyre.resources module
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#module-expyre.subprocess">
   expyre.subprocess module
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#module-expyre.system">
   expyre.system module
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#module-expyre.units">
   expyre.units module
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#module-expyre.util">
   expyre.util module
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#module-expyre">
   Module contents
  </a>
 </li>
</ul>

                        </nav>
                    </div>
                </div>
            </div>
            <main id="main-content" role="main">
                
              <div>
                
  <div class="section" id="expyre-package">
<h1>expyre package<a class="headerlink" href="#expyre-package" title="Permalink to this heading">#</a></h1>
<div class="section" id="subpackages">
<h2>Subpackages<a class="headerlink" href="#subpackages" title="Permalink to this heading">#</a></h2>
<div class="toctree-wrapper compound">
<ul>
<li class="toctree-l1"><a class="reference internal" href="expyre.cli.html">expyre.cli package</a><ul>
<li class="toctree-l2"><a class="reference internal" href="expyre.cli.html#submodules">Submodules</a></li>
<li class="toctree-l2"><a class="reference internal" href="expyre.cli.html#expyre-cli-cli-module">expyre.cli.cli module</a></li>
<li class="toctree-l2"><a class="reference internal" href="expyre.cli.html#module-expyre.cli">Module contents</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="expyre.schedulers.html">expyre.schedulers package</a><ul>
<li class="toctree-l2"><a class="reference internal" href="expyre.schedulers.html#submodules">Submodules</a></li>
<li class="toctree-l2"><a class="reference internal" href="expyre.schedulers.html#module-expyre.schedulers.base">expyre.schedulers.base module</a></li>
<li class="toctree-l2"><a class="reference internal" href="expyre.schedulers.html#module-expyre.schedulers.local">expyre.schedulers.local module</a></li>
<li class="toctree-l2"><a class="reference internal" href="expyre.schedulers.html#module-expyre.schedulers.pbs">expyre.schedulers.pbs module</a></li>
<li class="toctree-l2"><a class="reference internal" href="expyre.schedulers.html#module-expyre.schedulers.sge">expyre.schedulers.sge module</a></li>
<li class="toctree-l2"><a class="reference internal" href="expyre.schedulers.html#module-expyre.schedulers.slurm">expyre.schedulers.slurm module</a></li>
<li class="toctree-l2"><a class="reference internal" href="expyre.schedulers.html#module-expyre.schedulers">Module contents</a></li>
</ul>
</li>
</ul>
</div>
</div>
<div class="section" id="submodules">
<h2>Submodules<a class="headerlink" href="#submodules" title="Permalink to this heading">#</a></h2>
</div>
<div class="section" id="module-expyre.config">
<span id="expyre-config-module"></span><h2>expyre.config module<a class="headerlink" href="#module-expyre.config" title="Permalink to this heading">#</a></h2>
<p>configuration for expyre, from <code class="docutils literal notranslate"><span class="pre">config.json</span></code> in <code class="docutils literal notranslate"><span class="pre">$EXPYRE_ROOT</span></code> or <code class="docutils literal notranslate"><span class="pre">$HOME/.expyre</span></code></p>
<div class="section" id="global-variables">
<h3>Global variables<a class="headerlink" href="#global-variables" title="Permalink to this heading">#</a></h3>
<dl class="simple">
<dt>root: str</dt><dd><p>path of root directory for this run</p>
</dd>
<dt>systems: dict</dt><dd><p>dict of expyre.system.System that jobs can run on</p>
</dd>
<dt>db: JobsDB</dt><dd><p>expyre.jobsdb.JobsDB database of jobs</p>
</dd>
</dl>
<dl class="py function">
<dt class="sig sig-object py" id="expyre.config.init">
<span class="sig-prename descclassname"><span class="pre">expyre.config.</span></span><span class="sig-name descname"><span class="pre">init</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">root_dir</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">verbose</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/expyre/config.html#init"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#expyre.config.init" title="Permalink to this definition">#</a></dt>
<dd><p>Initializes <code class="docutils literal notranslate"><span class="pre">root</span></code>, <code class="docutils literal notranslate"><span class="pre">systems</span></code>, <code class="docutils literal notranslate"><span class="pre">db</span></code></p>
</dd></dl>

</div>
</div>
<div class="section" id="module-expyre.func">
<span id="expyre-func-module"></span><h2>expyre.func module<a class="headerlink" href="#module-expyre.func" title="Permalink to this heading">#</a></h2>
<p>Interface for remotely running python functions.  It pickles the function and
its arguments, stages files (pickles as well as additional requested input files)
to a local directory, submits to remote System (which stages out inputs, submits
on remote queuing system, and stages outputs back in), and then unpickles results
to return function result.  It also creates/updates the JobsDB entry for the job
as it does these steps.</p>
<p>Possible status (see JobsDB): created, submitted, started, succeeded/failed, processed, cleaned</p>
<dl class="py class">
<dt class="sig sig-object py" id="expyre.func.ExPyRe">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">expyre.func.</span></span><span class="sig-name descname"><span class="pre">ExPyRe</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">input_files</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">[]</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">env_vars</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">[]</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pre_run_commands</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">[]</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">post_run_commands</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">[]</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">output_files</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">[]</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">try_restart_from_prev</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">hash_ignore</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">[]</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">function</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">args</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">[]</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">kwargs</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">{}</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">_from_db_info</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/expyre/func.html#ExPyRe"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#expyre.func.ExPyRe" title="Permalink to this definition">#</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Create Queued Remote Function object, pickles function and inputs, stores files
in local stage dir, and adds to job database.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>name</strong> (<em>str</em>) – name of job</p></li>
<li><p><strong>input_files</strong> (<em>list</em><em>(</em><em>str</em><em> | </em><em>Path</em><em>)</em><em>, </em><em>optional</em>) – input files that function will need.  Relative paths without ‘..’ path components
files will be copied to same path relative to remote rundir on remote machine.
Absolute paths will result in files copied into top level remote rundir</p></li>
<li><p><strong>env_vars</strong> (<em>list</em><em>(</em><em>str</em><em>)</em><em>, </em><em>optional</em>) – list of env vars to set in remote queuing script</p></li>
<li><p><strong>pre_run_commands</strong> (<em>list</em><em>(</em><em>str</em><em>)</em><em>, </em><em>optional</em>) – list of commands, one per line, to run at start of remote queuing script, after commands
in config.json that are used for system</p></li>
<li><p><strong>post_run_commands</strong> (<em>list</em><em>(</em><em>str</em><em>)</em><em>, </em><em>optional</em>) – list of commands, one per line, to run at end of remote queuing script, after actual task</p></li>
<li><p><strong>output_files</strong> (<em>list</em><em>(</em><em>str</em><em>)</em><em>, </em><em>optional</em>) – output files to be copied back after evaluation is done</p></li>
<li><p><strong>try_restart_from_prev</strong> (<em>bool</em><em>, </em><em>default True</em>) – try to restart from previous call, based on hash of function, arguments, and input files</p></li>
<li><p><strong>hash_ignore</strong> (<em>list</em><em>(</em><em>int</em><em> or </em><em>str</em><em>)</em><em>, </em><em>optional</em>) – args elements (int) or kwargs items (str) to ignore when making hash to determine if run is
identical to some previous one</p></li>
<li><p><strong>function</strong> (<em>Callable</em>) – function to call</p></li>
<li><p><strong>args</strong> (<em>list</em>) – positional arguments to function</p></li>
<li><p><strong>kwargs</strong> (<em>dict</em>) – keyword arguments to function</p></li>
<li><p><strong>_from_db_info</strong> (<em>dict</em><em>, </em><em>optional</em><em> (</em><em>intended for internal use</em><em>)</em>) – restart is from db, and dict contains special arguments: remote_id, system_name, status, stage_dir</p></li>
<li><p><strong>JobsDB</strong><strong>)</strong> (<em>Possible status</em><em> (</em><em>see</em>) – </p></li>
</ul>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="expyre.func.ExPyRe.cancel">
<span class="sig-name descname"><span class="pre">cancel</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">verbose</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/expyre/func.html#ExPyRe.cancel"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#expyre.func.ExPyRe.cancel" title="Permalink to this definition">#</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="expyre.func.ExPyRe.clean">
<span class="sig-name descname"><span class="pre">clean</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">wipe</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dry_run</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">verbose</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/expyre/func.html#ExPyRe.clean"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#expyre.func.ExPyRe.clean" title="Permalink to this definition">#</a></dt>
<dd><p>clean the local and remote stage directories</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>wipe</strong> (<em>bool</em><em>, </em><em>default False</em>) – wipe directory completely, opposed to just writing CLEANED into files that could be large
like python function input and output (NOTE: other staged in files or files that are created
are not cleaned if wipe=False)</p></li>
<li><p><strong>dry_run</strong> (<em>bool</em><em>, </em><em>default False</em>) – dry run only, print what will happen but do not actually delete or overwrite anything</p></li>
<li><p><strong>verbose</strong> (<em>bool</em><em>, </em><em>default False</em>) – verbose output</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="expyre.func.ExPyRe.from_jobsdb">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">from_jobsdb</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">db_jobs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/expyre/func.html#ExPyRe.from_jobsdb"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#expyre.func.ExPyRe.from_jobsdb" title="Permalink to this definition">#</a></dt>
<dd><p>Create a list of ExPyRe objects from JobsDB records</p>
<dl class="simple">
<dt>Parameters</dt><dd></dd>
<dt>db_jobs: dict or list(dict)</dt><dd><p>one or more jobs records returned from <code class="docutils literal notranslate"><span class="pre">JobsDB.jobs()</span></code></p>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>created objects</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>list(<a class="reference internal" href="#expyre.func.ExPyRe" title="expyre.func.ExPyRe">ExPyRe</a>)</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="expyre.func.ExPyRe.get_results">
<span class="sig-name descname"><span class="pre">get_results</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">timeout</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">3600</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">check_interval</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">30</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sync</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sync_all</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">force_sync</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">quiet</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">verbose</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/expyre/func.html#ExPyRe.get_results"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#expyre.func.ExPyRe.get_results" title="Permalink to this definition">#</a></dt>
<dd><p>Get results from a remote job</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>timeout</strong> (<em>int</em><em> or </em><em>str</em><em>, </em><em>default 3600</em>) – Max time (in sec if int, time spec if str) to wait for job to complete, None or int &lt;= 0 to wait forever</p></li>
<li><p><strong>check_interval</strong> (<em>int</em><em>, </em><em>default 30</em>) – Time to wait (in sec) between checks of job completion</p></li>
<li><p><strong>sync</strong> (<em>bool</em><em>, </em><em>default True</em>) – Synchronize remote files before checking for results
Note that if this is False and job is finished on remote system but output files haven’t been
previously synchronize, this will wait one check_interval then raise an error</p></li>
<li><p><strong>sync_all</strong> (<em>bool</em><em>, </em><em>default True</em>) – Sync files from all jobs (not just this one), to reduce number of separate remote copy calls</p></li>
<li><p><strong>force_sync</strong> (<em>bool</em><em>, </em><em>default False</em>) – Sync remote files even if job’s DB status indicates that this was already done.
Note: together with sync_all this can lead to rsync having to compare many files.</p></li>
<li><p><strong>quiet</strong> (<em>bool</em><em>, </em><em>default False</em>) – No progress info</p></li>
<li><p><strong>verbose</strong> (<em>bool</em><em>, </em><em>default False</em>) – Verbose output (from remote system/scheduler commands)</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><ul class="simple">
<li><p>value of function</p></li>
<li><p>string containing stdout during function</p></li>
<li><p>string containing stderr during function</p></li>
</ul>
</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>return, stdout, stderr</p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="expyre.func.ExPyRe.id">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">id</span></span><a class="headerlink" href="#expyre.func.ExPyRe.id" title="Permalink to this definition">#</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="expyre.func.ExPyRe.mark_processed">
<span class="sig-name descname"><span class="pre">mark_processed</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/expyre/func.html#ExPyRe.mark_processed"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#expyre.func.ExPyRe.mark_processed" title="Permalink to this definition">#</a></dt>
<dd><p>Mark job as processed (usually after results have been stored someplace)</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="expyre.func.ExPyRe.start">
<span class="sig-name descname"><span class="pre">start</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">resources</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">system_name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">header_extra</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">[]</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">exact_fit</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">partial_node</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">python_cmd</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'python3'</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/expyre/func.html#ExPyRe.start"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#expyre.func.ExPyRe.start" title="Permalink to this definition">#</a></dt>
<dd><p>Start a job on a remote machine</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>resoures</strong> (<em>dict</em><em> or </em><a class="reference internal" href="#expyre.resources.Resources" title="expyre.resources.Resources"><em>Resources</em></a>) – resources to use for job, either Resources or dict of Resources constructor kwargs</p></li>
<li><p><strong>system_name</strong> (<em>str</em>) – name of system in config.systems</p></li>
<li><p><strong>header_extra</strong> (<em>list</em><em>(</em><em>str</em><em>)</em><em>, </em><em>optional</em>) – list of lines to add to queuing system header, appended to System.header[]</p></li>
<li><p><strong>exact_fit</strong> (<em>bool</em><em>, </em><em>default True</em>) – use only nodes that exactly match number of tasks</p></li>
<li><p><strong>partial_node</strong> (<em>bool</em><em>, </em><em>default False</em>) – allow jobs that take less than an entire node</p></li>
<li><p><strong>python_cmd</strong> (<em>std</em><em>, </em><em>default python3</em>) – name of python interpreter to use on remote machine</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="expyre.func.ExPyRe.sync_remote_results_status">
<span class="sig-name descname"><span class="pre">sync_remote_results_status</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">sync_all</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">force_sync</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">verbose</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/expyre/func.html#ExPyRe.sync_remote_results_status"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#expyre.func.ExPyRe.sync_remote_results_status" title="Permalink to this definition">#</a></dt>
<dd><p>Sync files associated with results from remote machine to local stage dirs and
updates ‘remote_status’ in jobsdb.  Note that both have to happen because other
functions assume that if remote status has been updated files have been staged back
as well.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>sync_all</strong> (<em>bool</em><em>, </em><em>default True</em>) – sync files for all jobs on same system, to minimize number of calls to remote copy</p></li>
<li><p><strong>force_sync</strong> (<em>bool</em><em>, </em><em>default False</em>) – sync files even if this job’s status indicates that this has already been done</p></li>
<li><p><strong>verbose</strong> (<em>bool</em><em>, </em><em>default False</em>) – verbose output</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="expyre.func.ExPyRe.sync_remote_results_status_ll">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">sync_remote_results_status_ll</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">jobs_to_sync</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">n_group</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">250</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cli</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">verbose</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/expyre/func.html#ExPyRe.sync_remote_results_status_ll"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#expyre.func.ExPyRe.sync_remote_results_status_ll" title="Permalink to this definition">#</a></dt>
<dd><p>Low level part of syncing jobs.  Gets remote files _and_ updates ‘remote_status’
field in jobsdb.  Note that both have to happen because other functions assume that
if remote status has been updated files have been staged back as well.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>cls</strong> (<em>class</em>) – class for classmethod (unused)</p></li>
<li><p><strong>jobs_to_sync</strong> (<em>list</em><em>(</em><em>dict</em><em>)</em>) – list of job dicts returned by jobsdb.jobs()</p></li>
<li><p><strong>n_group</strong> (<em>int</em><em>, </em><em>default 250</em>) – number of jobs to do in a group with each rsync call</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py exception">
<dt class="sig sig-object py" id="expyre.func.ExPyReJobDied">
<em class="property"><span class="pre">exception</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">expyre.func.</span></span><span class="sig-name descname"><span class="pre">ExPyReJobDied</span></span><a class="reference internal" href="_modules/expyre/func.html#ExPyReJobDied"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#expyre.func.ExPyReJobDied" title="Permalink to this definition">#</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">Exception</span></code></p>
</dd></dl>

</div>
<div class="section" id="module-expyre.jobsdb">
<span id="expyre-jobsdb-module"></span><h2>expyre.jobsdb module<a class="headerlink" href="#module-expyre.jobsdb" title="Permalink to this heading">#</a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="expyre.jobsdb.JobsDB">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">expyre.jobsdb.</span></span><span class="sig-name descname"><span class="pre">JobsDB</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">db_filename</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/expyre/jobsdb.html#JobsDB"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#expyre.jobsdb.JobsDB" title="Permalink to this definition">#</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Database of jobs, currently implemented with sqlite.  Saves essential information
on jobs, including local and remote id, local directory it’s staged to, system
its been submitted to, and status.</p>
<dl class="simple">
<dt>Status: created - job has been created, but not yet submitted to run</dt><dd><p>submitted - job has been submitted to some queuing system
started - job has started running
succeeded - job has finished successfully, and results are available
failed - job has failed
died - job died without producing expected low level output
processed - job has been processed, and results no longer need to be saved
cleaned - job stage dir (local and remote) has been cleaned (large files overwritten or all files wiped)</p>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="expyre.jobsdb.JobsDB.add">
<span class="sig-name descname"><span class="pre">add</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">id</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">from_dir</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">status</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'created'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">system</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">remote_id</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">remote_status</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/expyre/jobsdb.html#JobsDB.add"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#expyre.jobsdb.JobsDB.add" title="Permalink to this definition">#</a></dt>
<dd><p>Add a job to the DB</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>id</strong> (<em>str</em>) – unique id for job (fails if id already exists)</p></li>
<li><p><strong>name</strong> (<em>str</em>) – name for job</p></li>
<li><p><strong>from_dir</strong> (<em>str/Path</em>) – path to directory job is to run from</p></li>
<li><p><strong>status</strong> (<em>str</em><em>, </em><em>default 'created'</em>) – status of job</p></li>
<li><p><strong>system</strong> (<em>str</em><em>, </em><em>optional</em>) – system job is running on</p></li>
<li><p><strong>remote_id</strong> (<em>str</em><em>, </em><em>optional</em>) – remote id on system</p></li>
<li><p><strong>remote_status</strong> (<em>str</em><em>, </em><em>optional</em>) – remote status on system</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="expyre.jobsdb.JobsDB.jobs">
<span class="sig-name descname"><span class="pre">jobs</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">status</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">id</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">system</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">readable</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/expyre/jobsdb.html#JobsDB.jobs"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#expyre.jobsdb.JobsDB.jobs" title="Permalink to this definition">#</a></dt>
<dd><p>Iterate through jobs</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>status</strong> (<em>str</em><em> or </em><em>list</em><em>(</em><em>str</em><em>)</em><em>, </em><em>default None</em>) – if not None, only report on jobs that match any status</p></li>
<li><p><strong>id</strong> (<em>str</em><em> or </em><em>list</em><em>(</em><em>str</em><em>)</em><em>, </em><em>default None</em>) – if present, include only jobs with id that match regexps in this list</p></li>
<li><p><strong>name</strong> (<em>str</em><em> or </em><em>list</em><em>(</em><em>str</em><em>)</em><em>, </em><em>default None</em>) – if present, include only jobs with name that matches regexps in this list</p></li>
<li><p><strong>system</strong> (<em>str</em><em> or </em><em>list</em><em>(</em><em>str</em><em>)</em><em>, </em><em>default None</em>) – if present, include only jobs with system in this list</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>Iterator of dicts</strong></p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>Iterator of dicts with fields for all DB columns for each job that matches selection criteria.</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="expyre.jobsdb.JobsDB.possible_status">
<span class="sig-name descname"><span class="pre">possible_status</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">['created',</span> <span class="pre">'submitted',</span> <span class="pre">'started',</span> <span class="pre">'succeeded',</span> <span class="pre">'failed',</span> <span class="pre">'died',</span> <span class="pre">'processed',</span> <span class="pre">'cleaned']</span></em><a class="headerlink" href="#expyre.jobsdb.JobsDB.possible_status" title="Permalink to this definition">#</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="expyre.jobsdb.JobsDB.remove">
<span class="sig-name descname"><span class="pre">remove</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">id</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/expyre/jobsdb.html#JobsDB.remove"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#expyre.jobsdb.JobsDB.remove" title="Permalink to this definition">#</a></dt>
<dd><p>Remove a job from the DB</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>id</strong> (<em>str</em>) – unique id of job to remove</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="expyre.jobsdb.JobsDB.status_group">
<span class="sig-name descname"><span class="pre">status_group</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">{'can_produce_results':</span> <span class="pre">['created',</span> <span class="pre">'submitted',</span> <span class="pre">'started',</span> <span class="pre">'succeeded',</span> <span class="pre">'died'],</span> <span class="pre">'ongoing':</span> <span class="pre">['created',</span> <span class="pre">'submitted',</span> <span class="pre">'started']}</span></em><a class="headerlink" href="#expyre.jobsdb.JobsDB.status_group" title="Permalink to this definition">#</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="expyre.jobsdb.JobsDB.unlock">
<span class="sig-name descname"><span class="pre">unlock</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/expyre/jobsdb.html#JobsDB.unlock"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#expyre.jobsdb.JobsDB.unlock" title="Permalink to this definition">#</a></dt>
<dd><p>unlocks the sqlite database</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="expyre.jobsdb.JobsDB.update">
<span class="sig-name descname"><span class="pre">update</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">id</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">/</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/expyre/jobsdb.html#JobsDB.update"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#expyre.jobsdb.JobsDB.update" title="Permalink to this definition">#</a></dt>
<dd><p>Update some field of job</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>id</strong> (<em>str</em>) – unique id of job to update</p></li>
<li><p><strong>from_dir</strong> (<em>str</em>) – field(s) to update</p></li>
<li><p><strong>status</strong> (<em>str</em>) – field(s) to update</p></li>
<li><p><strong>system</strong> (<em>str</em>) – field(s) to update</p></li>
<li><p><strong>remote_id</strong> (<em>str</em>) – field(s) to update</p></li>
<li><p><strong>remote_status</strong> (<em>str</em>) – field(s) to update</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-expyre.resources">
<span id="expyre-resources-module"></span><h2>expyre.resources module<a class="headerlink" href="#module-expyre.resources" title="Permalink to this heading">#</a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="expyre.resources.Resources">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">expyre.resources.</span></span><span class="sig-name descname"><span class="pre">Resources</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">max_time</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">num_nodes</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">num_cores</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max_mem_tot</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max_mem_per_core</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">partitions</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">queues</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/expyre/resources.html#Resources"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#expyre.resources.Resources" title="Permalink to this definition">#</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Resources required for a task, including time, memory, cores/nodes, and particular
partitions/queues.  Mainly consists of code that selects appropriate partition/queue from
the list associated with each System.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>max_time</strong> (<em>int</em><em>, </em><em>str</em>) – max time for job in sec (int) or time spec (str)</p></li>
<li><p><strong>num_nodes</strong> (<em>int</em>) – number of nodes to use, mutually exclusive with num_cores, one is required</p></li>
<li><p><strong>num_cores</strong> (<em>int</em>) – number of cores to use, mutually exclusive with num_nodes, one is required</p></li>
<li><p><strong>max_mem_tot</strong> (<em>int/str</em><em>, </em><em>default None</em>) – total max mem in kB (int) or memory spec (str), mutually exclusive with max_mem_per_core</p></li>
<li><p><strong>max_mem_per_core</strong> (<em>int/str</em><em>, </em><em>default None</em>) – per-core max mem in kB (int) or memory spec (str), mutually exclusive with max_mem_tot</p></li>
<li><p><strong>partitions/queues</strong> (<em>list</em><em>(</em><em>str</em><em>)</em><em>, </em><em>default None</em>) – regexps for types of node that can be used</p></li>
</ul>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="expyre.resources.Resources.find_nodes">
<span class="sig-name descname"><span class="pre">find_nodes</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">partitions</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">exact_fit</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">partial_node</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/expyre/resources.html#Resources.find_nodes"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#expyre.resources.Resources.find_nodes" title="Permalink to this definition">#</a></dt>
<dd><p>find a node type that accommodates requested resources</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>partitions</strong> (<em>dict</em>) – properties of available partitions (only used internally by system.py, so “queues”
synonymn is not implemented here).</p></li>
<li><p><strong>exact_fit</strong> (<em>bool</em><em>, </em><em>default True</em>) – only return nodes that exactly satisfy the number of cores</p></li>
<li><p><strong>partial_node</strong> (<em>bool</em><em>, </em><em>default False</em>) – allow jobs that take less than one entire node, overrides exact_fit</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><ul class="simple">
<li><p><strong>partition</strong> (<em>str</em>) – name of partition selected</p></li>
<li><p><strong>node_dict</strong> (<em>dict</em>) – various quantities of node</p>
<ul>
<li><p>num_nodes: int, total number of nodes needed</p></li>
<li><p>num_cores: int, total number of cores needed</p></li>
<li><p>num_cores_per_node: int, number of cores per node for selected nodes</p></li>
</ul>
</li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-expyre.subprocess">
<span id="expyre-subprocess-module"></span><h2>expyre.subprocess module<a class="headerlink" href="#module-expyre.subprocess" title="Permalink to this heading">#</a></h2>
<p>Functions dealing with running subprocesses, optionally on remote machines, handling
quoting/shell escping, encoding/decoding, environment, and making sure that optional
arguments needed for things like kerberized-ssh are set correctly.</p>
<dl class="py exception">
<dt class="sig sig-object py" id="expyre.subprocess.FailedSubprocessWarning">
<em class="property"><span class="pre">exception</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">expyre.subprocess.</span></span><span class="sig-name descname"><span class="pre">FailedSubprocessWarning</span></span><a class="reference internal" href="_modules/expyre/subprocess.html#FailedSubprocessWarning"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#expyre.subprocess.FailedSubprocessWarning" title="Permalink to this definition">#</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">RuntimeWarning</span></code></p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="expyre.subprocess.subprocess_copy">
<span class="sig-prename descclassname"><span class="pre">expyre.subprocess.</span></span><span class="sig-name descname"><span class="pre">subprocess_copy</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">from_files</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">to_file</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">from_host</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'_LOCAL_'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">to_host</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'_LOCAL_'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">rcp_args</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'-a'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">rcp_cmd</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'rsync'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">remsh_cmd</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">retry</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">remsh_flags</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'-e'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">verbose</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dry_run</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/expyre/subprocess.html#subprocess_copy"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#expyre.subprocess.subprocess_copy" title="Permalink to this definition">#</a></dt>
<dd><p>Run a remote copy (e.g. rsync) in a subprocess, optionally to/from remote machine.  Exactly one
machine has to be specified, and relative paths on that machine are relative to its home dir, like
rsync.  If the specified machine is None the copy is local, but relative paths are still relative to
home dir.</p>
<p>Raises RuntimeError for non-zero return status.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>from_files</strong> (<em>str</em><em>, </em><em>Path</em><em>, </em><em>list</em><em>(</em><em>str</em><em>)</em><em>, </em><em>list</em><em>(</em><em>Path</em><em>)</em>) – one or more files/directories to copy from (not including <a class="reference external" href="mailto:'user&#37;&#52;&#48;host">‘user<span>&#64;</span>host</a>:’ part)</p></li>
<li><p><strong>to_file</strong> (<em>str</em><em>, </em><em>Path</em>) – _one_ file/directory to copy to (not including <a class="reference external" href="mailto:'user&#37;&#52;&#48;host">‘user<span>&#64;</span>host</a>:’ part)</p></li>
<li><p><strong>from_host</strong> (<em>str</em><em>, </em><em>optional</em>) – [username&#64;]host.domain to copy from (no “:”), mutually exclusive with to_host, one is required.
If None, use a local dir, but make relative paths relative to $HOME instead of to $PWD (like rsync with a host)</p></li>
<li><p><strong>to_host</strong> (<em>str</em><em>, </em><em>optional</em>) – [username&#64;]host.domain to copy to (no “:”), mutually exclusive with from_host, one is required.
If None, use a local dir, but make relative paths relative to $HOME instead of to $PWD (like rsync with a host)</p></li>
<li><p><strong>rcp_args</strong> (<em>str</em><em>, </em><em>default '-a'</em>) – non-filename arguments to remote copy command</p></li>
<li><p><strong>rcp_cmd</strong> (<em>str</em><em>, </em><em>default 'rsync'</em>) – command to do copy</p></li>
<li><p><strong>remsh_cmd</strong> (<em>str</em><em>, </em><em>default EXPYRE_RSH env var</em><em> or </em><em>ssh</em>) – arguments to set shell command for rcp_cmd to use</p></li>
<li><p><strong>retry</strong> (<em>optional</em>) – passed as retry argument to subprocess_run</p></li>
<li><p><strong>remsh_flags</strong> (<em>str</em><em>, </em><em>default '-e'</em>) – flag to prefix to remsh_cmd when calling rcp_cmd</p></li>
<li><p><strong>verbose</strong> (<em>bool</em><em>, </em><em>default False</em>) – verbose output</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="expyre.subprocess.subprocess_run">
<span class="sig-prename descclassname"><span class="pre">expyre.subprocess.</span></span><span class="sig-name descname"><span class="pre">subprocess_run</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">host</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">script</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">shell</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'bash</span> <span class="pre">-lc'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">remsh_cmd</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">retry</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">in_dir</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'_HOME_'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dry_run</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">verbose</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/expyre/subprocess.html#subprocess_run"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#expyre.subprocess.subprocess_run" title="Permalink to this definition">#</a></dt>
<dd><p>run a subprocess, optionally via ssh on a remote machine.  Raises RuntimeError for non-zero
return status.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>host</strong> (<em>str</em>) – [username]&#64;machine.domain, or None for a locally run process</p></li>
<li><p><strong>args</strong> (<em>list</em><em>(</em><em>str</em><em>)</em>) – arguments to run, starting with command and followed by its command line args</p></li>
<li><p><strong>script</strong> (<em>str</em><em>, </em><em>default None</em>) – text to write to process’s standard input</p></li>
<li><p><strong>shell</strong> (<em>str</em><em>, </em><em>default 'bash -lc'</em>) – shell to use, including any flags necessary for it to interpret the next argument
as the commands to run (-c for bash)</p></li>
<li><p><strong>remsh_command</strong> (<em>str</em><em> | </em><em>list</em><em>(</em><em>str</em><em>)</em><em>, </em><em>default env var EXPYRE_RSH</em><em> or </em><em>'ssh'</em>) – command to start on remote host, usually ssh</p></li>
<li><p><strong>retry</strong> (<em>(</em><em>int</em><em>, </em><em>int</em><em>)</em><em>, </em><em>default env var EXPYRE_RETRY.split</em><em>(</em><em>) or </em><em>(</em><em>2</em><em>, </em><em>5</em><em>)</em>) – number of times to retry and number of seconds to wait between each trial</p></li>
<li><p><strong>in_dir</strong> (<em>str</em><em>, </em><em>default _HOME_</em>) – directory to cd into before running args, _HOME_ for home dir, _PWD_ for python current working directory (only for host == None)</p></li>
<li><p><strong>verbose</strong> (<em>bool</em><em>, </em><em>default False</em>) – verbose output</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>stdout, stderr</strong></p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>output and error of subprocess, as strings (bytes.decode())</p>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="module-expyre.system">
<span id="expyre-system-module"></span><h2>expyre.system module<a class="headerlink" href="#module-expyre.system" title="Permalink to this heading">#</a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="expyre.system.System">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">expyre.system.</span></span><span class="sig-name descname"><span class="pre">System</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">host</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">partitions</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">scheduler</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">header</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">[]</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">no_default_header</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">commands</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">[]</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">rundir</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'run_expyre'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">rundir_extra</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">remsh_cmd</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/expyre/system.html#System"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#expyre.system.System" title="Permalink to this definition">#</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Interface for a System that can run jobs remotely, including staging files from
a local directory to a (config-specified) remote directory, submitting it with the correct
kind of Scheduler, and staging back the results from the remote directory.  Does not report
any other status directly.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>host</strong> (<em>str</em>) – [username&#64;]machine.fqdn</p></li>
<li><p><strong>partitions</strong> (<em>dict</em>) – dictionary describing partitions types</p></li>
<li><p><strong>scheduler</strong> (<em>str</em><em>, </em><a class="reference internal" href="expyre.schedulers.html#expyre.schedulers.base.Scheduler" title="expyre.schedulers.base.Scheduler"><em>Scheduler</em></a>) – type of scheduler</p></li>
<li><p><strong>header</strong> (<em>list</em><em>(</em><em>str</em><em>)</em><em>, </em><em>optional</em>) – list of batch system header to use in every job, typically for system-specific things
like selecting nodes</p></li>
<li><p><strong>no_default_header</strong> (<em>bool</em><em>, </em><em>default False</em>) – do not automatically add default header fields, namely job name, partition/queue,
max runtime, and stdout/stderr files</p></li>
<li><p><strong>commands</strong> (<em>list</em><em>(</em><em>str</em><em>)</em><em>, </em><em>optional</em>) – list of commands to run at start of every job on machine</p></li>
<li><p><strong>rundir</strong> (<em>str</em><em>, </em><em>default 'run_expyre'</em>) – path on remote machine to run in.  If absolute, used as if, and if relative, relative
to (remote) home directory</p></li>
<li><p><strong>remsh_cmd</strong> (<em>str</em><em>, </em><em>default EXPYRE_RSH</em><em> or </em><em>'ssh'</em>) – remote shell command to use with this system</p></li>
<li><p><strong>rundir_extra</strong> (<em>str</em><em>, </em><em>default None</em>) – extra string to add to remote_rundir, e.g. per-project part of path</p></li>
</ul>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="expyre.system.System.clean_rundir">
<span class="sig-name descname"><span class="pre">clean_rundir</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">stage_dir</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">filenames</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dry_run</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">verbose</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/expyre/system.html#System.clean_rundir"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#expyre.system.System.clean_rundir" title="Permalink to this definition">#</a></dt>
<dd><p>clean a remote stage directory</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>stage_dir</strong> (<em>str</em><em> | </em><em>Path</em>) – local stage directory path</p></li>
<li><p><strong>files</strong> (<em>list</em><em>(</em><em>str</em><em>) or </em><em>None</em>) – list of files to replaced with ‘CLEANED’, or wipe entire directory if None</p></li>
<li><p><strong>verbose</strong> (<em>bool</em><em>, </em><em>default False</em>) – verbose output</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="expyre.system.System.get_remotes">
<span class="sig-name descname"><span class="pre">get_remotes</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">local_dir</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">subdir_glob</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">verbose</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/expyre/system.html#System.get_remotes"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#expyre.system.System.get_remotes" title="Permalink to this definition">#</a></dt>
<dd><p>get data from directories of remotely running jobs</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>subdir_glob</strong> (<em>str</em><em>, </em><em>list</em><em>(</em><em>str</em><em>)</em><em>, </em><em>default None</em>) – only get subdirectories that much one or more globs</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="expyre.system.System.initialize_remote_rundir">
<span class="sig-name descname"><span class="pre">initialize_remote_rundir</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">verbose</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/expyre/system.html#System.initialize_remote_rundir"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#expyre.system.System.initialize_remote_rundir" title="Permalink to this definition">#</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="expyre.system.System.run">
<span class="sig-name descname"><span class="pre">run</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">script</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">shell</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'bash</span> <span class="pre">-lc'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">retry</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">in_dir</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'_HOME_'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dry_run</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">verbose</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/expyre/system.html#System.run"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#expyre.system.System.run" title="Permalink to this definition">#</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="expyre.system.System.submit">
<span class="sig-name descname"><span class="pre">submit</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">id</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">stage_dir</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">resources</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">commands</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">header_extra</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">[]</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">exact_fit</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">partial_node</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">verbose</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/expyre/system.html#System.submit"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#expyre.system.System.submit" title="Permalink to this definition">#</a></dt>
<dd><p>Submit a job on a remote machine, including staging out files</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>id</strong> (<em>str</em>) – unique id for job</p></li>
<li><p><strong>stage_dir</strong> (<em>str</em><em>, </em><em>Path</em>) – directory in which files have been prepared</p></li>
<li><p><strong>resources</strong> (<a class="reference internal" href="#expyre.resources.Resources" title="expyre.resources.Resources"><em>Resources</em></a>) – resources to use for job</p></li>
<li><p><strong>commands</strong> (<em>list</em><em>(</em><em>str</em><em>)</em>) – commands to run in job script after per-machine commands</p></li>
<li><p><strong>header_extra</strong> (<em>list</em><em>(</em><em>str</em><em>)</em><em>, </em><em>optional</em>) – list of lines to append to system header for this job</p></li>
<li><p><strong>exact_fit</strong> (<em>bool</em><em>, </em><em>default True</em>) – only match partitions that have nodes with exact match to number of cores</p></li>
<li><p><strong>partial_node</strong> (<em>bool</em><em>, </em><em>default False</em>) – allow jobs that take less than an entire node</p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>id of job on remote machine</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-expyre.units">
<span id="expyre-units-module"></span><h2>expyre.units module<a class="headerlink" href="#module-expyre.units" title="Permalink to this heading">#</a></h2>
<p>Units-related utilities for converting between various time and memory formats</p>
<dl class="py function">
<dt class="sig sig-object py" id="expyre.units.mem_to_kB">
<span class="sig-prename descclassname"><span class="pre">expyre.units.</span></span><span class="sig-name descname"><span class="pre">mem_to_kB</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">mem</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/expyre/units.html#mem_to_kB"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#expyre.units.mem_to_kB" title="Permalink to this definition">#</a></dt>
<dd><p>convert memory to kB</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>mem</strong> (<em>str</em><em> | </em><em>int</em>) – int: mem in kB
str format “float[kKmMgGtT]b?”: memory in KB, MB, GB, TB, float cannot have exponent</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>int memory in kB</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="expyre.units.time_to_HMS">
<span class="sig-prename descclassname"><span class="pre">expyre.units.</span></span><span class="sig-name descname"><span class="pre">time_to_HMS</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">t</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/expyre/units.html#time_to_HMS"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#expyre.units.time_to_HMS" title="Permalink to this definition">#</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="expyre.units.time_to_sec">
<span class="sig-prename descclassname"><span class="pre">expyre.units.</span></span><span class="sig-name descname"><span class="pre">time_to_sec</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">t</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/expyre/units.html#time_to_sec"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#expyre.units.time_to_sec" title="Permalink to this definition">#</a></dt>
<dd><p>convert time to seconds</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>t</strong> (<em>str</em><em>, </em><em>int</em>) – <ul class="simple">
<li><p>int: time in sec</p></li>
<li><p>str: format “float[sSmMhHdD]” number of seconds, minutes, hours, days, or “days(int)-HMS”         or “HMS”, with HMS being (HHHH:MM:SS | MM:SS | SS)</p></li>
</ul>
</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>int time in seconds</p>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="module-expyre.util">
<span id="expyre-util-module"></span><h2>expyre.util module<a class="headerlink" href="#module-expyre.util" title="Permalink to this heading">#</a></h2>
<dl class="py function">
<dt class="sig sig-object py" id="expyre.util.remsh_cmd">
<span class="sig-prename descclassname"><span class="pre">expyre.util.</span></span><span class="sig-name descname"><span class="pre">remsh_cmd</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cmd</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/expyre/util.html#remsh_cmd"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#expyre.util.remsh_cmd" title="Permalink to this definition">#</a></dt>
<dd><p>Get remote command</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>cmd</strong> (<em>str</em>) – </p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>cmd</strong> – Command set as <code class="docutils literal notranslate"><span class="pre">EXPYRE_RSH</span></code> environment variable, <code class="docutils literal notranslate"><span class="pre">&quot;ssh&quot;</span></code> otherwise.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="module-expyre">
<span id="module-contents"></span><h2>Module contents<a class="headerlink" href="#module-expyre" title="Permalink to this heading">#</a></h2>
</div>
</div>


              </div>
              
            </main>
            <footer class="footer-article noprint">
                
    <!-- Previous / next buttons -->
<div class='prev-next-area'>
    <a class='left-prev' id="prev-link" href="unit_testing.html" title="previous page">
        <i class="fas fa-angle-left"></i>
        <div class="prev-next-info">
            <p class="prev-next-subtitle">previous</p>
            <p class="prev-next-title">Unit testing</p>
        </div>
    </a>
    <a class='right-next' id="next-link" href="expyre.cli.html" title="next page">
    <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">expyre.cli package</p>
    </div>
    <i class="fas fa-angle-right"></i>
    </a>
</div>
            </footer>
        </div>
    </div>
    <div class="footer-content row">
        <footer class="col footer"><p>
  
      &copy; Copyright .<br/>
</p>
        </footer>
    </div>
    
</div>


      </div>
    </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="_static/scripts/pydata-sphinx-theme.js?digest=1999514e3f237ded88cf"></script>


  </body>
</html>